def chiffrer_cesar(message:str, cle:int):
    message_code = ""
    
    for lettre in message:
        message_code += chr(ord(lettre) + cle)
    
    return message_code

def dechiffrer_cesar(message_code:str, cle:int):
    return chiffrer_cesar(message_code, -cle)

import random

chiffrer_cesar("""
Il était une fois, dans une petite ville perchée sur une colline, une petite fille nommée Alice. Alice aimait explorer les forêts qui entouraient sa ville, ramassant des baies sauvages et en observant les animaux. Mais un jour, alors qu'elle se promenait dans les bois, elle se perdit.

Elle chercha pendant des heures un chemin de retour, mais elle ne trouva rien. Alors, elle s'assit sur une pierre et se mit à pleurer. Soudain, elle entendit un bruit étrange et vit une lueur de lumière derrière un buisson.

Curieuse, Alice s'approcha lentement. Derrière le buisson, elle trouva une porte minuscule, à peine assez grande pour qu'elle puisse passer. Sans hésiter, elle la franchit.

De l'autre côté, Alice découvrit un monde étrange et merveilleux. Elle se trouvait maintenant dans le pays des merveilles. Elle y rencontra une multitude de créatures fantastiques, comme un chat qui souriait et un lièvre qui parlait.

Au cours de son voyage dans le pays des merveilles, Alice rencontra la Reine de Cœur, qui régnait sur le pays. La Reine de Cœur était très méchante et aimait donner des ordres pour que les têtes des gens soient coupées. Alice ne voulait pas subir le même sort, alors elle décida de trouver un moyen de rentrer chez elle.

Finalement, Alice trouva une autre porte qui la ramena chez elle. Elle se réveilla dans la forêt, à l'endroit où elle avait commencé son voyage. C'était comme si rien ne s'était jamais passé, mais Alice savait que ce n'était pas vrai.

Depuis lors, Alice ne cessa jamais de penser à son incroyable aventure au pays des merveilles. Et bien que personne ne la crût jamais, elle savait que c'était réel et qu'elle avait vécu quelque chose de vraiment extraordinaire.
               """, random.randint(-20, 80))

code_a_casser = ')h\x8b?Ĉ\x93\x80\x88\x93?\x94\x8d\x84?\x85\x8e\x88\x92K?\x83\x80\x8d\x92?\x94\x8d\x84?\x8f\x84\x93\x88\x93\x84?\x95\x88\x8b\x8b\x84?\x8f\x84\x91\x82\x87Ĉ\x84?\x92\x94\x91?\x94\x8d\x84?\x82\x8e\x8b\x8b\x88\x8d\x84K?\x94\x8d\x84?\x8f\x84\x93\x88\x93\x84?\x85\x88\x8b\x8b\x84?\x8d\x8e\x8c\x8cĈ\x84?`\x8b\x88\x82\x84M?`\x8b\x88\x82\x84?\x80\x88\x8c\x80\x88\x93?\x84\x97\x8f\x8b\x8e\x91\x84\x91?\x8b\x84\x92?\x85\x8e\x91ĉ\x93\x92?\x90\x94\x88?\x84\x8d\x93\x8e\x94\x91\x80\x88\x84\x8d\x93?\x92\x80?\x95\x88\x8b\x8b\x84K?\x91\x80\x8c\x80\x92\x92\x80\x8d\x93?\x83\x84\x92?\x81\x80\x88\x84\x92?\x92\x80\x94\x95\x80\x86\x84\x92?\x84\x93?\x84\x8d?\x8e\x81\x92\x84\x91\x95\x80\x8d\x93?\x8b\x84\x92?\x80\x8d\x88\x8c\x80\x94\x97M?l\x80\x88\x92?\x94\x8d?\x89\x8e\x94\x91K?\x80\x8b\x8e\x91\x92?\x90\x94F\x84\x8b\x8b\x84?\x92\x84?\x8f\x91\x8e\x8c\x84\x8d\x80\x88\x93?\x83\x80\x8d\x92?\x8b\x84\x92?\x81\x8e\x88\x92K?\x84\x8b\x8b\x84?\x92\x84?\x8f\x84\x91\x83\x88\x93M))d\x8b\x8b\x84?\x82\x87\x84\x91\x82\x87\x80?\x8f\x84\x8d\x83\x80\x8d\x93?\x83\x84\x92?\x87\x84\x94\x91\x84\x92?\x94\x8d?\x82\x87\x84\x8c\x88\x8d?\x83\x84?\x91\x84\x93\x8e\x94\x91K?\x8c\x80\x88\x92?\x84\x8b\x8b\x84?\x8d\x84?\x93\x91\x8e\x94\x95\x80?\x91\x88\x84\x8dM?`\x8b\x8e\x91\x92K?\x84\x8b\x8b\x84?\x92F\x80\x92\x92\x88\x93?\x92\x94\x91?\x94\x8d\x84?\x8f\x88\x84\x91\x91\x84?\x84\x93?\x92\x84?\x8c\x88\x93?ÿ?\x8f\x8b\x84\x94\x91\x84\x91M?r\x8e\x94\x83\x80\x88\x8dK?\x84\x8b\x8b\x84?\x84\x8d\x93\x84\x8d\x83\x88\x93?\x94\x8d?\x81\x91\x94\x88\x93?Ĉ\x93\x91\x80\x8d\x86\x84?\x84\x93?\x95\x88\x93?\x94\x8d\x84?\x8b\x94\x84\x94\x91?\x83\x84?\x8b\x94\x8c\x88ć\x91\x84?\x83\x84\x91\x91\x88ć\x91\x84?\x94\x8d?\x81\x94\x88\x92\x92\x8e\x8dM))b\x94\x91\x88\x84\x94\x92\x84K?`\x8b\x88\x82\x84?\x92F\x80\x8f\x8f\x91\x8e\x82\x87\x80?\x8b\x84\x8d\x93\x84\x8c\x84\x8d\x93M?c\x84\x91\x91\x88ć\x91\x84?\x8b\x84?\x81\x94\x88\x92\x92\x8e\x8dK?\x84\x8b\x8b\x84?\x93\x91\x8e\x94\x95\x80?\x94\x8d\x84?\x8f\x8e\x91\x93\x84?\x8c\x88\x8d\x94\x92\x82\x94\x8b\x84K?ÿ?\x8f\x84\x88\x8d\x84?\x80\x92\x92\x84\x99?\x86\x91\x80\x8d\x83\x84?\x8f\x8e\x94\x91?\x90\x94F\x84\x8b\x8b\x84?\x8f\x94\x88\x92\x92\x84?\x8f\x80\x92\x92\x84\x91M?r\x80\x8d\x92?\x87Ĉ\x92\x88\x93\x84\x91K?\x84\x8b\x8b\x84?\x8b\x80?\x85\x91\x80\x8d\x82\x87\x88\x93M))c\x84?\x8bF\x80\x94\x93\x91\x84?\x82ē\x93ĈK?`\x8b\x88\x82\x84?\x83Ĉ\x82\x8e\x94\x95\x91\x88\x93?\x94\x8d?\x8c\x8e\x8d\x83\x84?Ĉ\x93\x91\x80\x8d\x86\x84?\x84\x93?\x8c\x84\x91\x95\x84\x88\x8b\x8b\x84\x94\x97M?d\x8b\x8b\x84?\x92\x84?\x93\x91\x8e\x94\x95\x80\x88\x93?\x8c\x80\x88\x8d\x93\x84\x8d\x80\x8d\x93?\x83\x80\x8d\x92?\x8b\x84?\x8f\x80\x98\x92?\x83\x84\x92?\x8c\x84\x91\x95\x84\x88\x8b\x8b\x84\x92M?d\x8b\x8b\x84?\x98?\x91\x84\x8d\x82\x8e\x8d\x93\x91\x80?\x94\x8d\x84?\x8c\x94\x8b\x93\x88\x93\x94\x83\x84?\x83\x84?\x82\x91Ĉ\x80\x93\x94\x91\x84\x92?\x85\x80\x8d\x93\x80\x92\x93\x88\x90\x94\x84\x92K?\x82\x8e\x8c\x8c\x84?\x94\x8d?\x82\x87\x80\x93?\x90\x94\x88?\x92\x8e\x94\x91\x88\x80\x88\x93?\x84\x93?\x94\x8d?\x8b\x88ć\x95\x91\x84?\x90\x94\x88?\x8f\x80\x91\x8b\x80\x88\x93M))`\x94?\x82\x8e\x94\x91\x92?\x83\x84?\x92\x8e\x8d?\x95\x8e\x98\x80\x86\x84?\x83\x80\x8d\x92?\x8b\x84?\x8f\x80\x98\x92?\x83\x84\x92?\x8c\x84\x91\x95\x84\x88\x8b\x8b\x84\x92K?`\x8b\x88\x82\x84?\x91\x84\x8d\x82\x8e\x8d\x93\x91\x80?\x8b\x80?q\x84\x88\x8d\x84?\x83\x84?bŲ\x94\x91K?\x90\x94\x88?\x91Ĉ\x86\x8d\x80\x88\x93?\x92\x94\x91?\x8b\x84?\x8f\x80\x98\x92M?k\x80?q\x84\x88\x8d\x84?\x83\x84?bŲ\x94\x91?Ĉ\x93\x80\x88\x93?\x93\x91ć\x92?\x8cĈ\x82\x87\x80\x8d\x93\x84?\x84\x93?\x80\x88\x8c\x80\x88\x93?\x83\x8e\x8d\x8d\x84\x91?\x83\x84\x92?\x8e\x91\x83\x91\x84\x92?\x8f\x8e\x94\x91?\x90\x94\x84?\x8b\x84\x92?\x93ĉ\x93\x84\x92?\x83\x84\x92?\x86\x84\x8d\x92?\x92\x8e\x88\x84\x8d\x93?\x82\x8e\x94\x8fĈ\x84\x92M?`\x8b\x88\x82\x84?\x8d\x84?\x95\x8e\x94\x8b\x80\x88\x93?\x8f\x80\x92?\x92\x94\x81\x88\x91?\x8b\x84?\x8cĉ\x8c\x84?\x92\x8e\x91\x93K?\x80\x8b\x8e\x91\x92?\x84\x8b\x8b\x84?\x83Ĉ\x82\x88\x83\x80?\x83\x84?\x93\x91\x8e\x94\x95\x84\x91?\x94\x8d?\x8c\x8e\x98\x84\x8d?\x83\x84?\x91\x84\x8d\x93\x91\x84\x91?\x82\x87\x84\x99?\x84\x8b\x8b\x84M))e\x88\x8d\x80\x8b\x84\x8c\x84\x8d\x93K?`\x8b\x88\x82\x84?\x93\x91\x8e\x94\x95\x80?\x94\x8d\x84?\x80\x94\x93\x91\x84?\x8f\x8e\x91\x93\x84?\x90\x94\x88?\x8b\x80?\x91\x80\x8c\x84\x8d\x80?\x82\x87\x84\x99?\x84\x8b\x8b\x84M?d\x8b\x8b\x84?\x92\x84?\x91Ĉ\x95\x84\x88\x8b\x8b\x80?\x83\x80\x8d\x92?\x8b\x80?\x85\x8e\x91ĉ\x93K?ÿ?\x8bF\x84\x8d\x83\x91\x8e\x88\x93?\x8eĘ?\x84\x8b\x8b\x84?\x80\x95\x80\x88\x93?\x82\x8e\x8c\x8c\x84\x8d\x82Ĉ?\x92\x8e\x8d?\x95\x8e\x98\x80\x86\x84M?bFĈ\x93\x80\x88\x93?\x82\x8e\x8c\x8c\x84?\x92\x88?\x91\x88\x84\x8d?\x8d\x84?\x92FĈ\x93\x80\x88\x93?\x89\x80\x8c\x80\x88\x92?\x8f\x80\x92\x92ĈK?\x8c\x80\x88\x92?`\x8b\x88\x82\x84?\x92\x80\x95\x80\x88\x93?\x90\x94\x84?\x82\x84?\x8dFĈ\x93\x80\x88\x93?\x8f\x80\x92?\x95\x91\x80\x88M))c\x84\x8f\x94\x88\x92?\x8b\x8e\x91\x92K?`\x8b\x88\x82\x84?\x8d\x84?\x82\x84\x92\x92\x80?\x89\x80\x8c\x80\x88\x92?\x83\x84?\x8f\x84\x8d\x92\x84\x91?ÿ?\x92\x8e\x8d?\x88\x8d\x82\x91\x8e\x98\x80\x81\x8b\x84?\x80\x95\x84\x8d\x93\x94\x91\x84?\x80\x94?\x8f\x80\x98\x92?\x83\x84\x92?\x8c\x84\x91\x95\x84\x88\x8b\x8b\x84\x92M?d\x93?\x81\x88\x84\x8d?\x90\x94\x84?\x8f\x84\x91\x92\x8e\x8d\x8d\x84?\x8d\x84?\x8b\x80?\x82\x91Ě\x93?\x89\x80\x8c\x80\x88\x92K?\x84\x8b\x8b\x84?\x92\x80\x95\x80\x88\x93?\x90\x94\x84?\x82FĈ\x93\x80\x88\x93?\x91Ĉ\x84\x8b?\x84\x93?\x90\x94F\x84\x8b\x8b\x84?\x80\x95\x80\x88\x93?\x95Ĉ\x82\x94?\x90\x94\x84\x8b\x90\x94\x84?\x82\x87\x8e\x92\x84?\x83\x84?\x95\x91\x80\x88\x8c\x84\x8d\x93?\x84\x97\x93\x91\x80\x8e\x91\x83\x88\x8d\x80\x88\x91\x84M)???????????????'
code_a_casser

def calculer_frequence_apparition_char(message:str) -> dict:
    """Fonction qui renvoie un dictionnaire contenant la fréquence d'apparition de chaque caractère

    Args:
        message (str): Message à casser

    Returns:
        dict: Un dictionnaire ayant pour clé un caractère et pour valeur sa fréquence d'apparition
    """
    resultat = {}
    for lettre in message:
        if resultat.get(lettre) is not None:
            resultat[lettre] += 1
        else: 
            resultat[lettre] = 1
    return resultat

def trouver_max_dico(dico:dict) -> str:
    """Fonction qui renvoie la clé ayant la plus grande valeur

    Args:
        dico (dict): Le dictionnaire à traiter

    Returns:
        str: la clé associée à la plus grande valeur
    """
    return max(dico, key=lambda key:dico[key])

cle_supposée = ord(trouver_max_dico(calculer_frequence_apparition_char(code_a_casser))) - ord(" ")

dechiffrer_cesar(code_a_casser, cle_supposée)

def chiffrer_vigenere(message:str, cle:tuple) -> str:
    message_code = ""
    index_cle = 0
    for lettre in message:
        message_code += chr(ord(lettre) + cle[index_cle])
        index_cle = (index_cle + 1) % len(cle)
    return message_code

def dechiffrer_vigenere(message_code:str, cle:tuple) -> str:
    return chiffrer_vigenere(message_code, [-elt for elt in cle])

code_a_casser = chiffrer_vigenere("""
Il était une fois, dans une petite ville perchée sur une colline, une petite fille nommée Alice. Alice aimait explorer les forêts qui entouraient sa ville, ramassant des baies sauvages et en observant les animaux. Mais un jour, alors qu'elle se promenait dans les bois, elle se perdit.

Elle chercha pendant des heures un chemin de retour, mais elle ne trouva rien. Alors, elle s'assit sur une pierre et se mit à pleurer. Soudain, elle entendit un bruit étrange et vit une lueur de lumière derrière un buisson.

Curieuse, Alice s'approcha lentement. Derrière le buisson, elle trouva une porte minuscule, à peine assez grande pour qu'elle puisse passer. Sans hésiter, elle la franchit.

De l'autre côté, Alice découvrit un monde étrange et merveilleux. Elle se trouvait maintenant dans le pays des merveilles. Elle y rencontra une multitude de créatures fantastiques, comme un chat qui souriait et un lièvre qui parlait.

Au cours de son voyage dans le pays des merveilles, Alice rencontra la Reine de Cœur, qui régnait sur le pays. La Reine de Cœur était très méchante et aimait donner des ordres pour que les têtes des gens soient coupées. Alice ne voulait pas subir le même sort, alors elle décida de trouver un moyen de rentrer chez elle.

Finalement, Alice trouva une autre porte qui la ramena chez elle. Elle se réveilla dans la forêt, à l'endroit où elle avait commencé son voyage. C'était comme si rien ne s'était jamais passé, mais Alice savait que ce n'était pas vrai.

Depuis lors, Alice ne cessa jamais de penser à son incroyable aventure au pays des merveilles. Et bien que personne ne la crût jamais, elle savait que c'était réel et qu'elle avait vécu quelque chose de vraiment extraordinaire.
               """, [9, 0, -3])

code_a_casser

for taille_cle in range(1, len(code_a_casser)//4):
    liste_str = []
    liste_dico = []
    cle = []
    
    for i in range(taille_cle):
        liste_str.append(code_a_casser[i::taille_cle])
    for elt in liste_str:
        liste_dico.append(calculer_frequence_apparition_char(elt))
    for elt in liste_dico:
        cle.append(ord(trouver_max_dico(elt)) - ord(" "))
    
    try:
        print(dechiffrer_vigenere(code_a_casser, tuple(cle)))
        print(cle)
    except:
        pass

    
